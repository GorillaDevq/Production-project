# Production-project
***
Пет-проект, созданный для разбора и изучения разных технологий.</br>
Сам проект позволяет пользователям делится,оценивать,писать различные статьи.

## Оглавление:
***
- [Установка](#установка)
- [Описание](#описание)
- [Сервер](#сервер)
- [CI/CD](#cicd)
- [Скрипты](#скрипты)
- [Директории](#директории)
- [Стек](#стек)
- [Тестирование](#тестирование)
## Установка
***
Чтобы воспользоваться готовыми скриптами проекта и запустить его, нужно установить зависимости
```
npm install
```

## Описание
***
В кратце опишу, чему я научился в этоми проекте. Более подробно по технологиям распишу чуть ниже
- Полная конфигурация Webpack с нуля;
- Настройка: React, Typescript, Babel, scss, css modules, eslint, stylelint;
- Настройка тестовой среды: jest, rtl, storybook, loki, Cypress.
- Использование архитектуры Feature-sliced design
- Оптимизация проекта, а именно работа с Bundle Analyzer, асинхронные компоненты и редьюсеры, изоляция модулей

## Архитектура
***
В проекте используется известная архитектура Feature-sliced design, она показалась мне подходящей для этого проекта.
<img src="https://sun9-10.userapi.com/impg/ijuHbeU51ArxcrXrXhGkIEtr8ftoIfhuvaJpfg/mgtVhT6t7_g.jpg?size=972x488&quality=96&sign=5c2fb87967d624ff85a8e3775afbdd8f&type=album" />
Слои стандартизированы во всех проектах и расположены вертикально. 
Модули на одном слое могут взаимодействовать лишь с модулями, находящимися на слоях строго ниже. 
В процессе разработки устранен слой `processes`:

- `shared` — переиспользуемый код, не имеющий отношения к специфике бизнеса;
- `entities`(сущности) — бизнес-сущности (например, User, Product, Profile);
- `features` (фичи) — взаимодействия с пользователем, действия, которые несут бизнес-ценность для пользователя (например: AuthByUserName);
- `widgets` (виджеты) — композиционный слой для соединения сущностей и фич в самостоятельные блоки (например: LangSwitcher, ThemeSwitcher);
- `pages` (страницы) — композиционный слой для сборки полноценных страниц из сущностей, фич и виджетов;
- `app` — настройки, стили и провайдеры для всего приложения;

## Сервер
***
В проекте установленна библиотека `json-server`, которая позволяет очень быстро поднимать REST-API, гибко конфигурировать и взаимодействовать с БД.</br>
Для запуска сервера:
```
npm run start:dev:server
```

## CI/CD
***
Настроен пайплайн для автоматизации прогона тестов ~~и автоматический деплой на сервер~~ (в процессе)
Распаралелены процессы сборки `storybook` и снятия скриншотных тестов с помощью `loki`</br>
Из-за ограничений на github, настроены `pre-commit` хуки для автоматизации прогона тестов

## Скрипты
***
- `start` - запускает проект в `dev` режиме;
- `start:dev:server` - запуск сервера и поднятие БД;
- `build:prod` - сборка проекта в `prod` режиме;
- `build:dev` - сборка проекта в `dev` режиме;
- `lint:ts` - запуск линтнера для `TypeScript`;
- `lint:ts:fix` - исправление ошибок линтнера для `TypeScript`;
- `lint:scss` - запуск линтнера для `SCSS`;
- `lint:scss:fix` - исправление ошибок линтнера для `SCSS`;
- `test:unit` - запуск `unit` тестов;
- `test:ui` - запуск скриншотных тестов с `storybook`;
- `test:ui:ci` - запуск скришотных тестов для пайплайна;
- `test:ui:local` - запуск скришотных тестов опираясь на сборку `storybook`;
- `test:ui:ok` - апрув скриншотных тестов;
- `test:ui:json` - генерация репорта по скриншотным тестам в формате `json`;
- `test:ui:html` - генерация репорта по скриншотным тестам в формате `html` для просмотра ошибок;
- `test:ui:report` - более удобное использование для генерации репорта;
- `storybook` - запуск `storybook`;
- `storybook:build` - сборка `storybook`;

## Директории
***
- `.github` - настройка `CI/CD`;
- `.husky` - настройка `pre-commit` хуков;
- `.loki` - директория со скриншотами, снятых тестами:
  - `current` - снятие скриншотов с последнего тестирования;
  - `reference` - актуальный скриншоты;
  - `difference` - различие между `current` и `reference`;
- `config` - хранит настройки тестов и вебпака;
    - `builds` - конфигурация вебпака для проекта и `storybook`;
    - `jest` - конфигурация тестов;
    - `storybook` - конфигурация `storybook`;
- `json-server` - директория для хранения БД и REST-API;
- `public` - директория содержит файл `html` и переводы в директории `locales`;
- `scripts` - директория для генерации `json` репорта;
- `src` - конфигурация самого приложения;

## Стек
***
TypeScript, React, Webpack, testing-library, SCSS, i18next, jest ...

## Тестирование
***
Реализована пирамида тестирования:
1. `Unit` - тесты написанные на `Jest`;
2. `Screenshot` - скриншотные тесты реализованные с помощью `storybook` и `loki`
3. `Integration` - тесты написанные на `react-testing-library`;
4. `E2E` - тестирование на `WebdriverIO` (в разработке);